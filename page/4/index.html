<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>逐光の博客</title><meta name="author" content="逐光"><meta name="copyright" content="逐光"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="I hear and I forget. I see and I remember. I do and I understand."><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.mpoom.cn/page/4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '逐光の博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-12-23 19:03:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/theme/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">170</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/categories/book/"><i class="fa-fw fa fa-book"></i><span> 读书</span></a></div><div class="menus_item"><a class="site-page" href="/categories/thought/"><i class="fa-fw fa fa-lightbulb"></i><span> 思考感悟</span></a></div><div class="menus_item"><a class="site-page" href="/skills/"><i class="fa-fw fas fa-code"></i><span> 专业能力</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">逐光の博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/categories/book/"><i class="fa-fw fa fa-book"></i><span> 读书</span></a></div><div class="menus_item"><a class="site-page" href="/categories/thought/"><i class="fa-fw fa fa-lightbulb"></i><span> 思考感悟</span></a></div><div class="menus_item"><a class="site-page" href="/skills/"><i class="fa-fw fas fa-code"></i><span> 专业能力</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/06/k8s/kube-prometheus-jian-kong-mysql/" title="Kube-Prometheus监控MySQL（二）"><img class="post-bg" src="/2023/05/06/k8s/kube-prometheus-jian-kong-mysql/k8s.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kube-Prometheus监控MySQL（二）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/06/k8s/kube-prometheus-jian-kong-mysql/" title="Kube-Prometheus监控MySQL（二）">Kube-Prometheus监控MySQL（二）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-05T16:00:00.000Z" title="发表于 2023-05-06 00:00:00">2023-05-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/k8s/">k8s</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/k8s/">k8s</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Prometheus/">Prometheus</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/exporter/">exporter</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a></span></div><div class="content">一、概述本文介绍如何使用 Kube-Prometheus 监控 MySQL 数据库。通过部署 MySQL Exporter，将 MySQL 的性能指标暴露给 Prometheus 进行采集和监控。
核心组件：

MySQL Exporter：用于暴露 MySQL 指标的 Exporter（镜像版本：v0.14.0）
ServiceMonitor：Prometheus Operator 的 CRD，用于服务发现和指标采集配置

二、部署 MySQL Exporter2.1 创建 Deployment通过 Deployment 部署 MySQL Exporter，需要配置数据库连接信息。
apiVersion: apps/v1
kind: Deployment
metadata:
  #设置唯一名称，建议添加数据库实例ip
  name:  mysql-exporter-172.16.1.77 
  namespace: monitoring
  labels:
    app.kubernetes.io/component: exporter
    app.kubernetes.io/ ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/05/k8s/kube-prometheus-jian-kong-zhu-ji-he-zhong-jian-jian/" title="Kube-Prometheus监控主机和中间件（一）"><img class="post-bg" src="/2023/05/05/k8s/kube-prometheus-jian-kong-zhu-ji-he-zhong-jian-jian/k8s%E8%AE%BF%E9%97%AE%E5%A4%96%E9%83%A8%E6%9C%8D%E5%8A%A1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kube-Prometheus监控主机和中间件（一）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/05/k8s/kube-prometheus-jian-kong-zhu-ji-he-zhong-jian-jian/" title="Kube-Prometheus监控主机和中间件（一）">Kube-Prometheus监控主机和中间件（一）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-04T16:00:00.000Z" title="发表于 2023-05-05 00:00:00">2023-05-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/k8s/">k8s</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/k8s/">k8s</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Prometheus/">Prometheus</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a></span></div><div class="content">一、背景简介随着业务向云原生架构迁移，原有的监控系统需要升级以适应容器化环境。本系列文章介绍如何使用 Kube-Prometheus 监控 K8s 集群外部的主机和中间件服务。
核心特点：

支持监控 K8s 集群外部的服务（MySQL、Redis、RocketMQ 等）
通过环境标签（platform）区分不同环境的监控数据
基于 Prometheus Operator 的 ServiceMonitor 机制实现服务发现

二、技术原理2.1 K8s 访问外部服务K8s 集群内的 Pod 访问外部服务的原理：

关键步骤：

创建 Endpoints 资源，指向外部服务的 IP 地址
创建 Service 资源，不配置 selector，关联到手动创建的 Endpoints
Pod 通过 Service 名称访问外部服务


2.2 ServiceMonitor 原理Prometheus Operator 通过 ServiceMonitor 实现服务发现：

工作流程：

ServiceMonitor 通过 selector 选择目标 Service
Prometheus Opera ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/04/24/java/dai-ma-review-gui-fan-zhi-nan-ji-shi-jian-an-li/" title="代码Review规范指南及实践案例"><img class="post-bg" src="/images/feature/2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="代码Review规范指南及实践案例"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/04/24/java/dai-ma-review-gui-fan-zhi-nan-ji-shi-jian-an-li/" title="代码Review规范指南及实践案例">代码Review规范指南及实践案例</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-23T16:00:00.000Z" title="发表于 2023-04-24 00:00:00">2023-04-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/">代码规范</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Code-Review/">Code Review</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">异常处理</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0/">日志打印</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E5%88%86%E5%B1%82/">项目分层</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">单元测试</a></span></div><div class="content">在项目开发过程中发现很多代码的坏味道，针对发现的问题进行分析和解答。本文将从异常处理、日志打印、项目分层、包结构划分、DTO使用、面向接口编程、单元测试等多个维度，提供Code Review的规范指南和实践案例。


一、异常处理1.1 核心问题在日常开发中，我们经常面临以下异常处理问题：

异常要抛出去还是catch处理？
写代码的过程中是否有主动抛出过异常？  
要抛出什么类型的异常，Exception、Throwable或其它？

1.2 异常处理准则核心原则：You should catch the exception when you are in the method that knows what to do


（1）低层级异常处理什么是低层级？这是与第三方代码集成的级别，例如ORM工具或任何执行IO操作的库（通过HTTP访问资源、读取文件、保存到数据库等）。也就是说，您离开应用程序的内部代码以与其他组件交互的级别。
处理准则：

只处理特定的异常，例如SqlTimeoutException或IOException。从不处理一般异常（Exception类型）
仅当您有一 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/09/mysql/yi-ge-qi-guai-de-shu-ju-ku-si-suo-wen-ti-pai-cha/" title="MySQL行锁升级邻键锁的Bug引起死锁问题排查"><img class="post-bg" src="/2023/03/09/mysql/yi-ge-qi-guai-de-shu-ju-ku-si-suo-wen-ti-pai-cha/%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL行锁升级邻键锁的Bug引起死锁问题排查"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/09/mysql/yi-ge-qi-guai-de-shu-ju-ku-si-suo-wen-ti-pai-cha/" title="MySQL行锁升级邻键锁的Bug引起死锁问题排查">MySQL行锁升级邻键锁的Bug引起死锁问题排查</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-08T16:00:00.000Z" title="发表于 2023-03-09 00:00:00">2023-03-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%AD%BB%E9%94%81/">死锁</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E8%A1%8C%E9%94%81/">行锁</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E9%82%BB%E9%94%AE%E9%94%81/">邻键锁</a></span></div><div class="content">一、问题现象线上接口在并发请求的场景部分请求失败，查询线上日志发现时出现死锁，异常日志如下：
org.apache.ibatis.exceptions.PersistenceException:
### Error querying database. Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
### The error may exist in com/....../dao/mapper/ShortLinkMapper.xml
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: select * from short_link_id_map where table_name_index = ? a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/31/thought/ru-he-gao-xiao-ti-wen/" title="如何高效提问"><img class="post-bg" src="/2022/10/31/thought/ru-he-gao-xiao-ti-wen/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何高效提问"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/31/thought/ru-he-gao-xiao-ti-wen/" title="如何高效提问">如何高效提问</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-30T16:00:00.000Z" title="发表于 2022-10-31 00:00:00">2022-10-31</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/thought/">thought</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%8F%90%E9%97%AE/">提问</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%A6%82%E4%BD%95%E6%8F%90%E9%97%AE/">如何提问</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/">高效提问</a></span></div><div class="content">如何高效提问——分享PPT

    
      
        您的浏览器不支持显示PDF文件
        📥 点击这里下载PDF文件
      
    
  </div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/07/book/ni-yao-ru-he-heng-liang-ni-de-ren-sheng/" title="《你要如何衡量你的人生》"><img class="post-bg" src="/images/book/%E4%BD%A0%E8%A6%81%E5%A6%82%E4%BD%95%E8%A1%A1%E9%87%8F%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《你要如何衡量你的人生》"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/07/book/ni-yao-ru-he-heng-liang-ni-de-ren-sheng/" title="《你要如何衡量你的人生》">《你要如何衡量你的人生》</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-09-06T16:00:00.000Z" title="发表于 2022-09-07 00:00:00">2022-09-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/book/">book</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E3%80%8A%E4%BD%A0%E8%A6%81%E5%A6%82%E4%BD%95%E8%A1%A1%E9%87%8F%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F%E3%80%8B/">《你要如何衡量你的人生》</a></span></div><div class="content">
简介《《你要如何衡量你的人生》 —— 哈佛商学院毕业前最重要的一堂课

克莱顿·克里斯坦森 凯伦·迪伦 詹姆斯·奥沃斯

写在前面的话这篇文章是阅读本书时发表的一些想法，今天偶然看到其中的一些想法被别人认同，重新翻开看看，其中思想和观点仍值得反复思考和学习。我们需要了解这个世界，更需要了解自己。
“思考什么”和“如何思考”的区别2021&#x2F;11&#x2F;02发表想法曾今我也热衷于向专家或事业有所成就的人寻求成功的答案，但是这些答案往往局限于他们自己的能力及所处环境，很少能够用于己身答案，遂转而向下一位成功者寻求答案。随着经历的事情越来越多，逐渐发现这种方式是不适当的，不同的人使用相同的方法，结局是大不相同的。后来总结提炼逐这些人的答案，从中找到了一些共同点，这些共同点就是一些原则，而将这些原则在自己身上实践，会更有成效。

如今，有一群所谓的专家只是提供一些答案，告诉你如何获得幸福和寻找到生命的意义，但是这些答案是否适合你就不得而知了。

第一章 真正激励你的是什么
那么，真正让我们非常满意并爱上工作的因素是什么呢？那就是赫茨伯格研究中的“动力因素”。动力因素包括：有挑战性 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/08/20/book/jin-zi-ta-yuan-li/" title="《金字塔原理》"><img class="post-bg" src="/images/book/%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《金字塔原理》"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/08/20/book/jin-zi-ta-yuan-li/" title="《金字塔原理》">《金字塔原理》</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-08-19T16:00:00.000Z" title="发表于 2022-08-20 00:00:00">2022-08-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/book/">book</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86/">金字塔原理</a></span></div><div class="content">

麦肯锡40年经典培训教材。思考、表达和解决问题的逻辑 —— 【美】芭芭拉·明托

写在前面的话这是一本讲“金字塔原理”的书籍，其中的思想对我们思考、表达有很深的指导意义。本书的核心思想不是很多，但由于是书籍载体的形式，而且书中存在大量案例，所以内容略显啰嗦，读起来有点乏味。如果只是想了解什么是“金字塔原理”，则阅读这本书的序言部分即可，这本书的序言对本书中的内容做了全面和高度的总结。如果你还想了解金字塔原理的一些方式方法，请继续向下阅读。
使用金字塔原理的最终想要达到的目的是“逻辑清晰”，或许我们没有读过这本书，但是在学习和工作中我们或多或少已经使用过一些方式方法。下面脑图是这本书的主要的目录结构：

序言“想清楚，说明白，知道说什么、怎么说”，是我们希望达到的境界。当我们与人沟通时，需要想清楚3件事：谁是我的听众？他们想听什么？他们想怎样听？
《金字塔原理》介绍了一种能清晰地展现思路的有效方法。掌握了金字塔原理，就能重点突出，逻辑清晰。不管是在政界、商界、学界，还是在企事业单位，所有高、中、基层职场人士，只要你需要思考和沟通，就会从金字塔原理受益。金字塔结构思考力是领导力的必要素 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/07/13/java/ssh-shi-yong-x11-zhuan-fa-yin-qi-de-yi-chang/" title="SSH使用X11转发引起的异常"><img class="post-bg" src="/2022/07/13/java/ssh-shi-yong-x11-zhuan-fa-yin-qi-de-yi-chang/xshell-config.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSH使用X11转发引起的异常"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/07/13/java/ssh-shi-yong-x11-zhuan-fa-yin-qi-de-yi-chang/" title="SSH使用X11转发引起的异常">SSH使用X11转发引起的异常</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-07-12T16:00:00.000Z" title="发表于 2022-07-13 00:00:00">2022-07-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SSH/">SSH</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/X11/">X11</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/XShell/">XShell</a></span></div><div class="content">一、问题背景测试同学在测试导出Excel功能时报错，异常日志如下：
java.util.concurrent.ExecutionException: java.awt.AWTError: Can&#39;t connect to X11 window server using &#39;localhost:10.0&#39; as the value of the DISPLAY variable.
        at java.util.concurrent.FutureTask.report(FutureTask.java:122)
        at java.util.concurrent.FutureTask.get(FutureTask.java:192)
        at com.xuanwu.ds.service.impl.export.async.ExportWorker.run(ExportWorker.java:76)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/19/rockermq/shen-du-jie-du-rocketmq-cun-chu-ji-zhi/" title="深度解读 RocketMQ 存储机制"><img class="post-bg" src="/2022/06/19/rockermq/shen-du-jie-du-rocketmq-cun-chu-ji-zhi/RocketMQ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深度解读 RocketMQ 存储机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/19/rockermq/shen-du-jie-du-rocketmq-cun-chu-ji-zhi/" title="深度解读 RocketMQ 存储机制">深度解读 RocketMQ 存储机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-18T16:00:00.000Z" title="发表于 2022-06-19 00:00:00">2022-06-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RocketMQ/">RocketMQ</a></span></div><div class="content">
在《阿里开发者》公众号看到这篇文章，深度解析了RocketMQ的存储机制，对理解RocketMQ存储原理及进行性能优化很有帮助。原文地址：深度解读 RocketMQ 存储机制

RocketMQ 实现了灵活的多分区和多副本机制，有效的避免了集群内单点故障对于整体服务可用性的影响。存储机制和高可用策略是 RocketMQ 稳定性的核心，社区上关于 RocketMQ 目前存储实现的分析与讨论一直是一个热议的话题。本文想从一个不一样的视角，着重于谈谈我眼中的这种存储实现是在解决哪些复杂的问题，因此我从本文最初的版本中删去了冗杂的代码细节分析，由浅入深的分析存储机制的缺陷与优化方向。

查看原文
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/15/book/ni-de-shan-liang-bi-xu-you-dian-feng-mang/" title="《你的善良必须有点锋芒》"><img class="post-bg" src="/images/book/%E4%BD%A0%E7%9A%84%E5%96%84%E8%89%AF%E5%BF%85%E9%A1%BB%E6%9C%89%E7%82%B9%E9%94%8B%E8%8A%92.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《你的善良必须有点锋芒》"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/15/book/ni-de-shan-liang-bi-xu-you-dian-feng-mang/" title="《你的善良必须有点锋芒》">《你的善良必须有点锋芒》</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-05-14T16:00:00.000Z" title="发表于 2022-05-15 00:00:00">2022-05-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/book/">book</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BD%A0%E7%9A%84%E5%96%84%E8%89%AF%E5%BF%85%E9%A1%BB%E6%9C%89%E7%82%B9%E9%94%8B%E8%8A%92/">你的善良必须有点锋芒</a></span></div><div class="content">
你的善良，必须有点锋芒，否则等于零 —— 【美】拉尔夫·瓦尔多·爱默生


写在前面的话曾经听到过这样的一句话：God helps those who help themselves,翻译后的意思是：上帝只救自救者。佛经有一句相似的话：众生皆苦，唯有自渡。随着成长我开始逐渐理解这两句话的意思，想要追寻幸福的人生，必须要学会自救或者自渡。在成长的道路上，我们会遇见许多迷茫和困惑，阻碍我们的前进和成长之路，或许我们都希望有人能够帮助我们克服困难，但是问题的根本原因是我们始终过不去自己心中的那一关，就这样不断陷入内心的煎熬之中。看到这本书的时候一下子就被这本书的名字吸引，但是书阅读后发现，书中的内容犹如空中楼阁，这里更建议大家去读：《被讨厌的勇气》、《可爱的诅咒》以及《自卑与超越》，这些书籍结合心理学的知识，分析了问题的本质，结合切实的案例提供了解决之法。虽然这本书中更多是鸡汤，但是书中提到的很多现象值得我们思考探讨一下。
诚知此恨人人有，贫贱夫妻百事哀
《遣悲怀三首·其二》
唐·元稹
昔日戏言身后事，今朝都到眼前来。
衣裳已施行看尽，针线犹存未忍开。
尚想旧情怜婢仆，也曾因梦送钱财。
诚 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><a class="extend next" rel="next" href="/page/5/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/theme/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">逐光</div><div class="author-info__description">I hear and I forget. I see and I remember. I do and I understand.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">170</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/flyfrank"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如有问题，欢迎留言沟通</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/20/redis/yi-ci-xian-shang-redis-ji-qun-jie-dian-zhu-cong-qie-huan-yin-qi-de-ying-yong-chong-qi-wen-ti-pai-cha-chu-li/" title="一次线上Redis集群节点主从切换引起的应用重启问题排查处理">一次线上Redis集群节点主从切换引起的应用重启问题排查处理</a><time datetime="2025-12-19T16:00:00.000Z" title="发表于 2025-12-20 00:00:00">2025-12-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/11/operations/yi-ci-sheng-chan-liu-liang-gong-ji-fang-yu-yu-jie-jue-fang-an/" title="一次生产流量攻击防御与解决方案">一次生产流量攻击防御与解决方案</a><time datetime="2025-11-10T16:00:00.000Z" title="发表于 2025-11-11 00:00:00">2025-11-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/26/thought/31-sui-zhan-zai-ren-sheng-shi-zi-lu-kou-yi-ci-shen-du-jie-pou-gao-bie-jiao-lu-mi-mang/" title="站在31岁的人生十字路口，我选择放下焦虑，与自己和解">站在31岁的人生十字路口，我选择放下焦虑，与自己和解</a><time datetime="2025-03-25T16:00:00.000Z" title="发表于 2025-03-26 00:00:00">2025-03-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/30/prometheus/jmx-exporter-xu-ni-ji-jvm-jian-kong-cai-ji-bu-shu/" title="JMX-Exporter虚拟机JVM监控采集部署">JMX-Exporter虚拟机JVM监控采集部署</a><time datetime="2024-12-29T16:00:00.000Z" title="发表于 2024-12-30 00:00:00">2024-12-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/K8s/"><span class="card-category-list-name">K8s</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/book/"><span class="card-category-list-name">book</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/k8s/"><span class="card-category-list-name">k8s</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/middleware/"><span class="card-category-list-name">middleware</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/spring/"><span class="card-category-list-name">spring</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/thought/"><span class="card-category-list-name">thought</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="card-category-list-name">中间件</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E4%B8%80%E5%88%86%E9%92%9F%E7%BB%8F%E7%90%86%E4%BA%BA/" style="font-size: 1.15em; color: rgb(58, 86, 53)">一分钟经理人</a><a href="/tags/%E4%BA%BA%E9%97%B4%E5%A4%B1%E6%A0%BC/" style="font-size: 1.15em; color: rgb(58, 169, 1)">人间失格</a><a href="/tags/%E4%BD%A0%E7%9A%84%E5%96%84%E8%89%AF%E5%BF%85%E9%A1%BB%E6%9C%89%E7%82%B9%E9%94%8B%E8%8A%92/" style="font-size: 1.15em; color: rgb(43, 86, 13)">你的善良必须有点锋芒</a><a href="/tags/%E3%80%8A%E4%BD%A0%E8%A6%81%E5%A6%82%E4%BD%95%E8%A1%A1%E9%87%8F%E4%BD%A0%E7%9A%84%E4%BA%BA%E7%94%9F%E3%80%8B/" style="font-size: 1.15em; color: rgb(185, 29, 78)">《你要如何衡量你的人生》</a><a href="/tags/%E5%85%B3%E9%94%AE%E5%AF%B9%E8%AF%9D/" style="font-size: 1.15em; color: rgb(31, 56, 25)">关键对话</a><a href="/tags/%E5%8E%9F%E7%94%9F%E5%AE%B6%E5%BA%AD/" style="font-size: 1.15em; color: rgb(159, 181, 166)">原生家庭</a><a href="/tags/%E5%8F%AF%E7%88%B1%E7%9A%84%E8%AF%85%E5%92%92/" style="font-size: 1.15em; color: rgb(49, 186, 61)">可爱的诅咒</a><a href="/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 1.15em; color: rgb(46, 28, 79)">读书</a><a href="/tags/%E6%B4%BB%E5%87%BA%E7%94%9F%E5%91%BD%E7%9A%84%E6%84%8F%E4%B9%89/" style="font-size: 1.15em; color: rgb(161, 52, 7)">活出生命的意义</a><a href="/tags/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94/" style="font-size: 1.15em; color: rgb(125, 115, 70)">被讨厌的勇气</a><a href="/tags/%E8%83%BD%E5%8A%9B%E9%99%B7%E9%98%B1/" style="font-size: 1.15em; color: rgb(148, 43, 48)">能力陷阱</a><a href="/tags/%E9%82%93%E5%B0%8F%E5%B9%B3%E6%97%B6%E4%BB%A3/" style="font-size: 1.15em; color: rgb(43, 159, 33)">邓小平时代</a><a href="/tags/%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86/" style="font-size: 1.15em; color: rgb(47, 110, 186)">金字塔原理</a><a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 1.15em; color: rgb(163, 80, 119)">动态规划</a><a href="/tags/%E9%9B%B6%E4%B8%80%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" style="font-size: 1.15em; color: rgb(76, 71, 159)">零一背包问题</a><a href="/tags/java/" style="font-size: 1.45em; color: rgb(53, 174, 120)">java</a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.15em; color: rgb(87, 121, 197)">设计模式</a><a href="/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/" style="font-size: 1.15em; color: rgb(74, 119, 30)">策略模式</a><a href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(110, 44, 24)">一致性哈希算法</a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.3em; color: rgb(66, 173, 20)">分布式</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">104</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">219.5k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-12-23T11:03:00.955Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2025 By 逐光</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div class="icp"><span><img src="/images/theme/icp_icon.png"/><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/#/Integrated/index">陕ICP备19021337号-1</span></a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>((window.gitter = {}).chat = {}).options = {
  room: 'blog-mpoom/community',
};

if (false) {
  function chatBtnHide () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'none'
  }

  function chatBtnShow () {
    document.getElementsByClassName('gitter-open-chat-button')[0].style.display= 'block'
  }
}
</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>